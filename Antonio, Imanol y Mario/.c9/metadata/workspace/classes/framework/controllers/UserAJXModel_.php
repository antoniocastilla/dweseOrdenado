{"filter":false,"title":"UserAJXModel>.php","tooltip":"/classes/framework/controllers/UserAJXModel>.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":97,"column":0},"end":{"row":106,"column":5},"action":"remove","lines":["    function login() {","        //1º control de sesión, si está logueado no se muestra el login","        if(!$this->getSession()->isLogged()) {","            //2º lectura de datos    -> no hay","            //3º validación de datos -> no hay","            //4º usar el modelo    -> no hace falta","            //5º producir resultado","            $this->getModel()->set('twigFile', 'page-login.html');","        }","    }"],"id":2},{"start":{"row":97,"column":0},"end":{"row":111,"column":5},"action":"insert","lines":["    function login($correo, $clave) {","        $gestor = $this->getDatabase();","        $usuario = $gestor->getRepository('framework\\dbobjects\\Usuario')->findOneBy(array('correo' => $correo));","        if($usuario !== null) {","            $resultado = \\framework\\classes\\Util::verificarClave($clave, $usuario->getClave());","            ","            if($resultado) {","                $usuario->setClave('');","                //Alejandro dixit","                //$this->set('usuario', $usuario->get());","                return $usuario;","            }","        }","        return false;","    }"]}]]},"ace":{"folds":[],"scrolltop":775,"scrollleft":0,"selection":{"start":{"row":97,"column":4},"end":{"row":111,"column":5},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":54,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1550663140824,"hash":"1f9b993fad798532498469afee08fd65c2238b62"}